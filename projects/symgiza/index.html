<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>SyMGIZA++ | Marcin Junczys-Dowmunt</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="stylesheet" href="http://emjotde.github.io/css/reset.css">
  <link rel="stylesheet" href="http://emjotde.github.io/css/mobile.css">
  <link rel="stylesheet" href="http://emjotde.github.io/css/desktop.css" media="(min-width:40em)">
  <link rel="stylesheet" href="http://emjotde.github.io/css/pygments.css">
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700|Ubuntu:300,500,300italic,500italic|Ubuntu+Condensed' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Tenor+Sans|Roboto+Condensed:400,300,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <script type="text/javascript" charset="utf-8" src="http://emjotde.github.io/js/matchmedia.js"></script>
  <script type="text/javascript" charset="utf-8" src="http://emjotde.github.io/js/picturefill.js"></script>
</head>

<body>
<div class="wrapper">
    <!--div class="github">
      <a href="https://github.com/tybenz/exemplar"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
    </div-->
    <header>
    <div class="container">
        <div class="profile">
            <div class="social">
                <a href="http://www.linkedin/in/junczys">
                    <script src="//platform.linkedin.com/in.js" type="text/javascript"></script><script type="IN/MemberProfile" data-id="http://www.linkedin.com/in/junczys" data-format="hover"></script>
		    <!--div data-picture data-alt="Twitter">
                        <div data-src="/img/twitter16.png"></div>
                        <div data-src="/img/twitter32.png"     data-media="(-webkit-min-device-pixel-ratio: 2)"></div>
                        <noscript><img src="/img/twitter16.png" alt="Twitter"></noscript>
                    </div-->
                </a>
                <a href="http://github.com/emjotde">
                    <div data-picture data-alt="Github">
                        <div data-src="/img/octocat16.png"></div>
                        <div data-src="/img/octocat32.png"     data-media="(-webkit-min-device-pixel-ratio: 2)"></div>
                        <noscript><img src="/img/octocat16.png" alt="Github"></noscript>
                    </div>
                </a>
            </div>
            <!--div class="avatar" data-picture data-alt="avatar">
                <div data-src="/img/me.jpg"></div>
                <div data-src="http://gravatar.com/avatar/9f5734a7063a4c48139f4999f3100167
?s=108" data-media="(-webkit-min-device-pixel-ratio: 2)"></div>
                <img src="/img/me.jpg" alt="me">
            </div-->
        </div>
        <h5 class="logo"><a href="http://emjotde.github.io">Marcin Junczys-Dowmunt</a></h5>
        <nav class="main">
            <ul>
                
                    <li><a href="http://emjotde.github.io">About</a></li>
                
                
                <li><a href="http://emjotde.github.io/publications">Publications</a></li>
                
                
                <li><a href="http://emjotde.github.io/projects" class="active">Projects</a></li>
                
                
                <li><a href="http://emjotde.github.io/dydaktyka">Dydaktyka</a></li>
                
            </ul>
        </nav>
        <div class="nav-slider">
            <div class="nav-selection projects"></div>
        </div>
        <!--div class="subnav-slider">
            <div class="subnav-selection "></div>
        </div>
        <nav class="subnav">
            <ul>
                
                    <li><a href="/exemplar" data-subnav="exemplar-home">Home</a></li>
                
                
                    <li><a href="/docs" data-subnav="exemplar-docs">Docs</a></li>
                
                
                    <li><a href="https://github.com/tybenz/exemplar/archive/master.zip" data-subnav="download">Download</a></li>
                
            </ul>
        </nav-->
    </div>
</header>


    <section id="main">
        <article class="container">
          <h1 class="hero">SyMGIZA++</h1>
          <p><strong>Clone from <a href="https://github.com/emjotde/symgiza-pp">https://github.com/emjotde/symgiza-pp</a></strong></p>

<p>SyMGIZA++ is a tool based on GIZA++ and MGIZA++. It extends the algorithms employed in both programs with a symmetrization mechanism, i.e. two directed word alignment models are trained in parallel and parameters of both models can be used between iterations to compute the parameters of the next model. We were able to show that this information interchange between models tends to improve word alignment quality directly and translation quality indirectly. </p>

<p>The main features of SyMGIZA++ are:
* the symmetrization mechanism,
* multi-threading - SyMGIZA++ inherits the multithreading capacities of MGIZA++, the two directed models are trained simultanously.</p>

<p>If you use this, please cite:</p>

<p><a href="http://emjotde.github.io/publications/pdf/mjd2011siis.pdf"><strong>SyMGiza++: Symmetrized Word Alignment Models for Machine Translation.</strong></a> Marcin Junczys-Dowmunt and Arkadiusz Szał. In Pascal Bouvry, Mieczyslaw A. Klopotek, Franck Leprévost, Malgorzata Marciniak, Agnieszka Mykowiecka, and Henryk Rybinski, editors, Security and Intelligent Information Systems (SIIS), volume 7053 of Lecture Notes in Computer Science, pages 379-390, Warsaw, Poland, 2012. Springer.</p>

<pre><code>@inproceedings{junczys_siis_2012,
  author = {Marcin Junczys-Dowmunt and Arkadiusz Szał},
  title = {SyMGiza++: Symmetrized Word Alignment Models for Machine Translation},
  booktitle = {Security and Intelligent Information Systems (SIIS)},
  year = {2012},
  editor = {Bouvry, Pascal and Klopotek, Mieczyslaw A. and Leprévost, Franck and Marciniak, Malgorzata and Mykowiecka, Agnieszka and Rybinski, Henryk},
  series = {Lecture Notes in Computer Science},
  volume = {7053},
  pages = {379-390},
  address = {Warsaw, Poland},
  publisher = {Springer},
  url = {http://emjotde.github.io/publications/pdf/mjd2011siis.pdf},
}
</code></pre>

<h2 id="installation">Installation</h2>

<p>The requirements for the compilation of SyMGIZA++ are the same as for MGIZA++: the boost libraries. These can be downloaded from [http://www.boost.org boost.org]. After unpacking, proceed with the following commands:
 ./configure –prefix=installation_folder
 make
 make install</p>

<h2 id="parameters">Parameters</h2>

<p>This paragraph describes all parameters used in SyMGIZA++. We tried to mimic most of the parameters of GIZA++ and MGIZA++, but there are some required changes (If more than one aliases appear in the command line then the one appears latest will be kept):</p>

<pre><code>-ncpu – number of threads, this is a parameter affects both directed models, i.e. -ncpu 5 will run 5 threads for each direction, resulting in 10 threads (subject to change in future versions),
</code></pre>

<p>input files – description of input parameters:</p>

<pre><code>-testcorpusfile (or -tc) – input corpus file (the snt file), the file will only be used in alignment but the counts will not affect the models,
-sourcevocabularyfile (or -s) – source vocabulary file (.vcb),
-targetvocabularyfile (or -t) – target vocabulary (.vcb).
</code></pre>

<p>number of iteration parameters – defines the training sequence of particular models – it describes number of iteration for each model:</p>

<pre><code>-m1 (or -noiterationsmodel1) – number of iterations for model 1,
-m2 (or -noiterationsmodel2) – number of iterations for model 2,
-m3 (or -noiterationsmodel3) – number of iterations for model 3,
-m4 (or -noiterationsmodel4) – number of iterations for model 4,
-m5 (or -noiterationsmodel5) – number of iterations for model 5,
-m6 (or -noiterationsmodel6) – number of iterations for model 6,
-mh (or -numberofiterationsforhmmalignmentmodel) – number of iterations for mhmm,
</code></pre>

<p>output files – parameters below describe files that will be created by SyMGIZA++:</p>

<pre><code>-compactalignmentformat true/false – the compact format contains only alignment links, such as 1 2 3 2
-countoutputprefix – do not dump the normalized model but the count tables before normalization,
-dumpcount true/false – dumping counts in addition to the normalized models, the count is dumped in the final step,
-dumpcountusingwordstring true/false – the word surface form will be used,
-logfile (or -l) – the path for log file,
-model1dumfrequency (or -t1) – dump model in every t1 iterations,
-model2dumfrequency (or -t2) – dump model in every t2 iterations,
-model345dumfrequency (or -t345) – dump model in every t345 iterations,
-hmmdumfrequency (or -th) – dump model in every th iterations,
-transferdumpfrequency (or -t2to3) – additional iteration to transfer from model 2 to model 3 is dumping,
-nbestalignmets true/false – no dumps will be made for model files and alignment files,
-onlyaldumps true/false – only dump alignment,
</code></pre>

<p>other parameters:</p>

<pre><code>-probsmooth float – when a probability entry cannot be fund on models, the value will be used.
</code></pre>

<p>New parameters implements in extension:</p>

<pre><code>-corpusfileEF (or -cef) – input corpus file for first direction – the snt file,
-corpusfileFE (or -cfe) – input corpus file for second direction – the snt file,
-CoocurrenceFileFE – co-occurrence file for first direction,
-CoocurrenceFileEF - co-occurrence file for second direction,
-oef – output alias for generated files in first direction,
-ofe – output alias for generated files in second direction,
-o – output alias for other generated files,
-m1symfrequency - symmetrization frequency of iteration for model 1,
-m2symfrequency - symmetrization frequency of iteration for model 2,
-m345symfrequency - symmetrization frequency of iteration for model 3, 4 and 5,
-mhsymfrequency - symmetrization frequency of iteration for hmm,
-tm – symmetrization t tables multiplier – this parameter precise importance of symmetrization, if this parameter is bigger, then words connected find in both direction have bigger probability of good connection,
-es - run final symmetrization (1 - yes, 0 - no),
-alig - type of alignment for final symmetrization, available options (similar to Moses alignment option):
    intersect
    union
    grow
    srctotgt
    tgttosrc
-diagonal - do diagonal on final symmetrization (yes or no),
-final - (yes or no),
-both - (yes or no).
</code></pre>

<p>The alignment output of SyMGIZA++ will be:</p>

<pre><code>prefixOfDirectionOne.A3.final.part0
prefixOfDirectionOne.A3.final.part1
...
prefixOfDirectionTwo.A3.final.part0
prefixOfDirectionTwo.A3.final.part1
...
</code></pre>

<p>To combine the alignments you need to run:</p>

<pre><code>installation_folder/scripts/merge_alignment.py prefixOfDirectionOne.A3.final.part&gt; prefixOfDirectionOne.A3.final
installation_folder/scripts/merge_alignment.py prefixOfDirectionTwo.A3.final.part&gt; prefixOfDirectionOne.A3.final
</code></pre>

<h2 id="a-minimal-example-how-to-run-symgiza">A minimal example how to run SyMGIZA++</h2>

<p>Run plain2snt executables file to generate snt files for each direction from two corpuses (Corpus1 and Corpus2):</p>

<pre><code>installation_folder/src/plain2snt ./Corpus1 ./$Corpus2
installation_folder/src/plain2snt ./Corpus2 ./$Corpus1
</code></pre>

<p>Next generate words classes:</p>

<pre><code>installation_folder/src/mkcls/mkcls -pCorpus1 –VCorpus1.vcb.classes
installation_folder/src/mkcls/mkcls -pCorpus2 -VCorpus2.vcb.classes
</code></pre>

<p>Run snt2cooc executable to generate a co-occurrence file:</p>

<pre><code>installation_folder/src/snt2cooc c1-c2.cooc Corpus1.vcb Corpus2.vcb Corpus1_Corpus2.snt
installation_folder/src/snt2cooc c2-c1.cooc Corpus2.vcb Corpus1.vcb Corpus2_Corpus1.snt
</code></pre>

<p>After preparing this file You can run the main process of computation – SyMGIZA++:</p>

<pre><code>installation_folder /src/symgiza -ncpus 2 -s Corpus1.vcb -t Corpus2.vcb -cef Corpus1_Corpus2.snt
 -cfe Corpus2_Corpus1.snt -oef c1 -ofe c2 -o all -CoocurrenceFileEF c1-c2.cooc -CoocurrenceFileFE c2-c1.cooc
 -m1 5 -m2 5 -m3 5 -m4 5 -mh 5 -t1 5 -t2 5 -th 5 -t345 5 -m1symfrequency 5 -m2symfrequency 5
 -mhsymfrequency 5 -m345symfrequency 5 -tm 2 -es 1 -alig intersect -diagonal yes -final yes -both yes
</code></pre>

<p>The following parameters are set in the above program call:</p>

<pre><code>-npus 2 – two thread for each direction of computation
-s Corpus1.vcb – name of the source corpus
-t Corpus2.vcb – name of the target corpus
-cef Corpus2_Corpus1.snt – name of the snt file for first direction
-cfe Corpus2_Corpus1.snt – name of the snt file for second direction
-oef c1 – alias for output files in first direction
-ofe c2 – alias for output files in second direction
-o all - – alias for another output files
-CoocurrenceFileEF c1-c2.cooc – co-occurence file for first direction
-CoocurrenceFileFE c2-c1.cooc – co-occurence file for second direction
-m1 5 – number of iterations for model 1
-m2 5 – number of iterations for model 2
-m3 5 – number of iterations for model 3
-m4 5 – number of iterations for model 4
-mh 5 – number of iterations for hmm
-t1 5 – dump model 1 after fifth iteration
-t2 5 – dump model 2 after fifth iteration
-th 5 – dump hmm after fifth iteration
-t345 5 – dump model 3, 4 and 5 after fifth iteration
-m1symfrequency 5 – symmetrization after five iterations of model 1
-m2symfrequency 5 – symmetrization after five iterations of model 2
-mhsymfrequency 5 – symmetrization after five iterations of hmm
-m345symfrequency 5 – symmetrisation after five iterations of model 3, 4 and 5
-tm 2 – multiple symmetrisation through two (mjd: ???)
-es 1 - run final symmetrization
-alig intersect - run intersection on final symmetrization
-diagonal yes
-final yes
-both yes
</code></pre>

<p>Final results:</p>

<pre><code>c1.A3.final - final alignment for computation from source to target without final symmetrization,
c2.A3.final - final alignment for computation from target to source without final symmetrization,
all.A3.final_symal - - final alignment with final symmetrization.
</code></pre>

<p>We have included a bash script that runs SymGIZA++ with the default parameters:</p>

<pre><code>./run.sh source_file_name target_file_name input_files_path
</code></pre>

        </article>
    </section>

    <footer>
    <nav class="container">
        <ul>
            <li>&copy; Marcin Junczys-Dowmunt 2014</li>
        </ul>
    </nav>
</footer>

</body>
<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33073396-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>
<script type="text/javascript" charset="utf-8">
    document.onreadystatechange = function() {
        if ( document.readyState == 'complete' ) {
            var active = document.querySelector( 'header nav.main a.active' ).innerHTML.toLowerCase(),
                links = document.querySelectorAll( 'header nav.main li a'),
                selection = document.querySelector( 'header .nav-selection' ),
                subactive = document.querySelector( 'header nav.subnav a.active' ).dataset.subnav,
                sublinks = document.querySelectorAll( 'header nav.subnav li a'),
                subselection = document.querySelector( 'header .subnav-selection' ),
                i, j, link;
            for ( i = 0; i < links.length; i++ ) {
                link = links[ i ];
                link.addEventListener( 'mouseover', function() {
                    selection.className = 'nav-selection';
                    selection.className = 'nav-selection ' + this.innerHTML.toLowerCase();
                });
                link.addEventListener( 'mouseout', function() {
                    selection.className = 'nav-selection ' + active;
                });
            }
            for ( i = 0; i < sublinks.length; i++ ) {
                link = sublinks[ i ];
                link.addEventListener( 'mouseover', function() {
                    subselection.className = 'subnav-selection';
                    subselection.className = 'subnav-selection ' + this.dataset.subnav;
                });
                link.addEventListener( 'mouseout', function() {
                    subselection.className = 'subnav-selection ' + subactive;
                });
            }
        }
    };
</script>

</html>
